package com.example.demo.simpletest.util;import java.text.ParseException;import java.text.SimpleDateFormat;import java.util.Calendar;import java.util.Date;/** * ProjectName * <BR><B>身份证号util类：</B><BR><BR> * DescriptionDetail * * @author ：ifsbank * @date : 2019-04-10 17:07 * @since 1.8 */public class IDCardUtil {    public static void main(String[] args) {        System.out.println(getAgeByIDNumber("141601199703212039"));    }    /**     * 非法的年龄，用于处理异常。     */    private static final int invalidAge = -1;    /**     * 根据身份证号码计算年龄     *     * @param idNumber 考虑到了15位身份证，但不一定存在     */    public static int getAgeByIDNumber(String idNumber) {        String dateStr;        if (idNumber.length() == 15) {            dateStr = "19" + idNumber.substring(6, 12);        } else if (idNumber.length() == 18) {            dateStr = idNumber.substring(6, 14);        } else {//默认是合法身份证号，但不排除有意外发生            return invalidAge;        }        SimpleDateFormat simpleDateFormat = new SimpleDateFormat("yyyyMMdd");        try {            Date birthday = simpleDateFormat.parse(dateStr);            return getAgeByDate(birthday);        } catch (ParseException e) {            return invalidAge;        }    }    /**     * 根据生日计算年龄     *     * @param dateStr 这样格式的生日 1990-01-01     */    public static int getAgeByDateString(String dateStr) {        SimpleDateFormat simpleDateFormat = new SimpleDateFormat("yyyy-MM-dd");        try {            Date birthday = simpleDateFormat.parse(dateStr);            return getAgeByDate(birthday);        } catch (ParseException e) {            return -1;        }    }    public static int getAgeByDate(Date birthday) {        Calendar calendar = Calendar.getInstance();        //calendar.before()有的点bug        if (calendar.getTimeInMillis() - birthday.getTime() < 0L) {            return invalidAge;        }        int yearNow = calendar.get(Calendar.YEAR);        int monthNow = calendar.get(Calendar.MONTH);        int dayOfMonthNow = calendar.get(Calendar.DAY_OF_MONTH);        calendar.setTime(birthday);        int yearBirthday = calendar.get(Calendar.YEAR);        int monthBirthday = calendar.get(Calendar.MONTH);        int dayOfMonthBirthday = calendar.get(Calendar.DAY_OF_MONTH);        int age = yearNow - yearBirthday;        if (monthNow <= monthBirthday && monthNow == monthBirthday && dayOfMonthNow < dayOfMonthBirthday || monthNow < monthBirthday) {            age--;        }        return age;    }    /**     * 自动生成身份证有效期     * @return     */    public static String generateCardValidityPeriod(int increaseNum) {        Date date = new Date();        Calendar now = Calendar.getInstance();        now.setTime(date);        int year = now.get(Calendar.YEAR);        // 0-based!        int month = now.get(Calendar.MONTH) + 1;        int day = now.get(Calendar.DAY_OF_MONTH);        return "";    }}